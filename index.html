<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nirvana Agreement</title>
  <style>
    body, html {
      height: 100%;
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #111;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    /* Fullscreen background with 3D effect */
    .background-animation {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.wallpapertip.com/wmimgs/91-917734_futuristic-dark-gaming-background.jpg') no-repeat center center/cover;
      animation: moveBackground 60s infinite linear;
      z-index: -1;
    }

    @keyframes moveBackground {
      0% { transform: translateX(0) rotateY(10deg); }
      50% { transform: translateX(-50%) rotateY(5deg); }
      100% { transform: translateX(0) rotateY(10deg); }
    }

    /* Container for the form */
    .container {
      width: 90%;
      max-width: 900px;
      background-color: rgba(0, 0, 0, 0.8);
      color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
      padding: 30px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 90%;
    }

    h2, h3 {
      text-align: center;
      font-size: 28px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 20px;
      text-shadow: 0px 0px 10px rgba(52, 152, 219, 0.8);
    }

    .section {
      display: none;
      margin-bottom: 20px;
      animation: slideIn 1s ease;
      width: 100%;
      flex-grow: 1;
    }

    .section.active {
      display: block;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-size: 16px;
    }

    input[type="text"], input[type="email"], input[type="file"], textarea {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 2px solid #3498db;
      border-radius: 8px;
      background-color: #34495e;
      color: #ecf0f1;
      font-size: 16px;
      box-sizing: border-box;
    }

    textarea {
      resize: vertical;
    }

    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    button {
      padding: 12px 24px;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.8);
      transform: scale(1);
    }

    button:hover {
      background-color: #2980b9;
      box-shadow: 0 0 25px rgba(52, 152, 219, 1);
      transform: scale(1.05);
    }

    button:focus {
      outline: none;
    }

    /* Shake animation for invalid fields */
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      50% { transform: translateX(10px); }
      75% { transform: translateX(-10px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.5s ease;
    }

    /* 3D sliding transition */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Loading message */
    #loading-message {
      display: none;
      text-align: center;
      margin-top: 20px;
      font-size: 20px;
      color: #ecf0f1;
    }
  </style>
</head>
<body>

  <!-- Background Animation -->
  <div class="background-animation"></div>

  <div class="container">
    <h2>Nirvana Agreement</h2>

    <form id="nirvana-form">
      <!-- Section 1: Front Page -->
      <div class="section active" id="front-page">
        <h3>1. Front Page - Contact Information</h3>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" name="phone" required>

        <label for="whatsapp">WhatsApp Number:</label>
        <input type="text" id="whatsapp" name="whatsapp">

        <label for="address">Address:</label>
        <textarea id="address" name="address" rows="3"></textarea>
        <div class="button-group">
          <button type="button" id="next-button-1" onclick="nextSection('front-page', 'personal-uploads')">Next</button>
        </div>
      </div>

      <!-- Section 2: Personal Uploads -->
      <div class="section" id="personal-uploads">
        <h3>2. Personal Uploads</h3>
        <label for="pic">Upload Recent Picture:</label>
        <input type="file" id="pic" name="pic" accept="image/*" required>

        <label for="id-proof">Upload ID Proof:</label>
        <input type="file" id="id-proof" name="id-proof" accept="image/*, application/pdf" required>

        <label for="signature">Upload Signature:</label>
        <input type="file" id="signature" name="signature" accept="image/*" required>
        <div class="button-group">
          <button type="button" onclick="prevSection('personal-uploads', 'front-page')">Back</button>
          <button type="button" id="next-button-2" onclick="nextSection('personal-uploads', 'content-attachment')">Next</button>
        </div>
      </div>

      <!-- Section 3: Content Attachment -->
      <div class="section" id="content-attachment">
        <h3>3. Content Attachment</h3>
        <label for="facebook-id">Facebook Gaming ID:</label>
        <input type="text" id="facebook-id" name="facebook-id" required>

        <label for="instagram-id">Instagram Gaming ID:</label>
        <input type="text" id="instagram-id" name="instagram-id" required>

        <label for="youtube-id">YouTube Gaming ID:</label>
        <input type="text" id="youtube-id" name="youtube-id" required>
        <div class="button-group">
          <button type="button" onclick="prevSection('content-attachment', 'personal-uploads')">Back</button>
          <button type="button" id="next-button-3" onclick="nextSection('content-attachment', 'terms-and-conditions')">Next</button>
        </div>
      </div>

      <!-- Section 4: Terms and Conditions -->
      <div class="section" id="terms-and-conditions">
        <h3>4. Terms and Conditions</h3>
        <p>Please read the terms and conditions carefully.</p>
        <textarea rows="6" readonly>
        [Insert Terms and Conditions here...]
        </textarea>

        <!-- Checkbox for agreement -->
        <label for="agree">I agree to the terms and conditions:</label>
        <input type="checkbox" id="agree" name="agree" required>

        <div class="button-group">
          <button type="button" onclick="prevSection('terms-and-conditions', 'content-attachment')">Back</button>
          <button type="submit">Submit</button>
        </div>
      </div>

    </form>

    <div id="loading-message">Submitting your data...</div>
  </div>

  <script>
  // Show the first section by default
  document.getElementById('front-page').style.display = 'block';

  // Function to navigate to the next section
  function nextSection(currentSectionId, nextSectionId) {
    document.getElementById(currentSectionId).style.display = 'none';
    document.getElementById(nextSectionId).style.display = 'block';
  }

  // Function to navigate to the previous section
  function prevSection(currentSectionId, prevSectionId) {
    document.getElementById(currentSectionId).style.display = 'none';
    document.getElementById(prevSectionId).style.display = 'block';
  }

  // Function to handle form submission with file uploads as base64
  async function handleFormSubmit() {
    const form = document.getElementById('nirvana-form');
    const formData = new FormData(form);

    // Ensure that checkbox is checked before proceeding
    if (!document.getElementById('agree').checked) {
      alert('You must agree to the terms and conditions.');
      return;
    }

    // Show the submitting message after submit button is clicked
    document.getElementById('loading-message').style.display = 'block';
    document.getElementById('nirvana-form').style.display = 'none'; // Hide the form during submission

    try {
      const fileFields = ['pic', 'id-proof', 'signature'];
      for (const field of fileFields) {
        const fileInput = document.getElementById(field);
        if (fileInput.files.length > 0) {
          formData.set(field, await getBase64(fileInput.files[0]));
        }
      }

      // Simulate the form submission (replace with your actual submission code)
      const response = await fetch('https://script.google.com/macros/s/AKfycbwXytKMiq33_0QQ3wLLEkBYyY_ochI_205S2jTwZiEfXn6RiN0-QsYKB2pQ9Bk3s7oM/exec', {
        method: 'POST',
        body: formData,
      });

      const responseText = await response.text();
      alert(responseText); // Optionally display server response

      // After successful submission, change the message to "Thank you for Registering"
      document.getElementById('loading-message').innerHTML = 'Thank you for Registering!';
    } catch (error) {
      console.error('Error:', error);
      alert('Submission failed. Please try again.');
      document.getElementById('nirvana-form').style.display = 'block';
      document.getElementById('loading-message').style.display = 'none';
    }
  }

  // Function to convert file to base64
  function getBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result.split(',')[1]);
      reader.onerror = error => reject(error);
    });
  }
</script>
</body>
</html>
