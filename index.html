<script>
  // Show the first section by default
  document.getElementById('front-page').style.display = 'block';

  // Function to navigate to the next section
  function nextSection(currentSectionId, nextSectionId) {
    document.getElementById(currentSectionId).style.display = 'none';
    document.getElementById(nextSectionId).style.display = 'block';
  }

  // Function to navigate to the previous section
  function prevSection(currentSectionId, prevSectionId) {
    document.getElementById(currentSectionId).style.display = 'none';
    document.getElementById(prevSectionId).style.display = 'block';
  }

  // Function to handle form submission with file uploads as base64
  async function handleFormSubmit() {
    const form = document.getElementById('nirvana-form');
    const formData = new FormData(form);

    // Ensure that checkbox is checked before proceeding
    if (!document.getElementById('agree').checked) {
      alert('You must agree to the terms and conditions.');
      return;
    }

    // Show the submitting message after submit button is clicked
    document.getElementById('loading-message').style.display = 'block';
    document.getElementById('nirvana-form').style.display = 'none'; // Hide the form during submission

    try {
      const fileFields = ['pic', 'id-proof', 'signature'];
      for (const field of fileFields) {
        const fileInput = document.getElementById(field);
        if (fileInput.files.length > 0) {
          formData.set(field, await getBase64(fileInput.files[0]));
        }
      }

      // Simulate the form submission (replace with your actual submission code)
      const response = await fetch('https://script.google.com/macros/s/AKfycbwXytKMiq33_0QQ3wLLEkBYyY_ochI_205S2jTwZiEfXn6RiN0-QsYKB2pQ9Bk3s7oM/exec', {
        method: 'POST',
        body: formData,
      });

      const responseText = await response.text();
      alert(responseText); // Optionally display server response

      // After successful submission, change the message to "Thank you for Registering"
      document.getElementById('loading-message').innerHTML = 'Thank you for Registering!';
    } catch (error) {
      console.error('Error:', error);
      alert('Submission failed. Please try again.');
      document.getElementById('nirvana-form').style.display = 'block';
      document.getElementById('loading-message').style.display = 'none';
    }
  }

  // Function to convert file to base64
  function getBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result.split(',')[1]);
      reader.onerror = error => reject(error);
    });
  }
</script>

</body>
</html>
