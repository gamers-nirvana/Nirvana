<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nirvana Agreement</title>
  <style>
    body, html {
  height: 100%;
  margin: 0;
  font-family: Arial, sans-serif;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  background-color: #000;
    }

    /* Fullscreen background with 3D effect inside the grey box */
.background-animation {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120%;  /* Set width to 100% */
  height: 120%;  /* Set height to 100% */
  background: url('Nirvana.png') no-repeat center center; 
  background-size: contain;  /* Ensure the image covers the entire area */
  animation: moveBackground 10s infinite linear;  /* Faster animation */
  opacity: 0.3;
  z-index: 0;
  transform: translate(-50%, -50%);
  pointer-events: none;  /* Make sure it doesn't interfere with other elements */
}

/* Keyframe animation for the moving background with collisions inside the grey box */
@keyframes moveBackground {
  0% {
    transform: translate(-50%, -50%) translateX(0) translateY(0) rotate(0deg);
  }
  25% {
    transform: translate(-50%, -50%) translateX(-20%) translateY(-20%) rotate(10deg);
  }
  50% {
    transform: translate(-50%, -50%) translateX(20%) translateY(20%) rotate(-10deg);
  }
  75% {
    transform: translate(-50%, -50%) translateX(-10%) translateY(10%) rotate(15deg);
  }
  100% {
    transform: translate(-50%, -50%) translateX(0) translateY(0) rotate(0deg);
  }
}
    
    /* Container for the form */
    .container {
      width: 120%;
      background-color: transparent;
      color: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.6);
      padding: 30px;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    h2, h3 {
      text-align: center;
      font-size: 28px;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 20px;
      text-shadow: 0px 0px 10px rgba(52, 152, 219, 0.8);
    }

    .section {
      display: none;
      margin-bottom: 20px;
      animation: slideIn 1s ease;
      width: 100%;
      flex-grow: 1;
      padding: 20px;
      height: calc(100vh - 120px);
      overflow: auto;
    }

    .section.active {
      display: block;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-size: 16px;
    }

    input[type="text"], input[type="email"], input[type="file"], textarea {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 2px solid #3498db;
      border-radius: 8px;
      background-color: #34495e;
      color: #ecf0f1;
      font-size: 16px;
      box-sizing: border-box;
    }

    textarea {
      resize: vertical;
    }

    .button-group {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }

    button {
      padding: 12px 24px;
      background-color: #3498db;
      color: #fff;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      box-shadow: 0 0 15px rgba(52, 152, 219, 0.8);
      transform: scale(1);
    }

    button:hover {
      background-color: #2980b9;
      box-shadow: 0 0 25px rgba(52, 152, 219, 1);
      transform: scale(1.05);
    }

    button:focus {
      outline: none;
    }

    /* Shake animation for invalid fields */
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      50% { transform: translateX(10px); }
      75% { transform: translateX(-10px); }
      100% { transform: translateX(0); }
    }

    .shake {
      animation: shake 0.5s ease;
    }

    /* 3D sliding transition */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Loading message */
    #loading-message {
      display: none;
      text-align: center;
      margin-top: 20px;
      font-size: 20px;
      color: #ecf0f1;
    }
  </style>
</head>
<body>

  <!-- Background Animation -->
  <div class="background-animation"></div>

  <div class="container">
    <h2>Nirvana Agreement</h2>

    <form id="nirvana-form" enctype="multipart/form-data">
      <!-- Section 1: Front Page -->
      <div class="section active" id="front-page">
        <h3>1. Front Page - Contact Information</h3>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="phone">Phone Number:</label>
        <input type="text" id="phone" name="phone" required>

        <label for="whatsapp">WhatsApp Number:</label>
        <input type="text" id="whatsapp" name="whatsapp">
        
        <div class="button-group">
          <button type="button" id="next-button-1" onclick="nextSection('front-page', 'personal-uploads')">Next</button>
        </div>
      </div>

      <!-- Section 2: Personal Uploads -->
      <div class="section" id="personal-uploads">
        <h3>2. Personal Uploads</h3>
        <label for="pic">Upload Recent Picture:</label>
        <input type="file" id="pic" name="pic" accept="image/*" required>

        <div class="button-group">
          <button type="button" onclick="prevSection('personal-uploads', 'front-page')">Back</button>
          <button type="button" id="next-button-2" onclick="nextSection('personal-uploads', 'content-attachment')">Next</button>
        </div>
      </div>

      <!-- Section 3: Content Attachment -->
      <div class="section" id="content-attachment">
        <h3>3. Content Attachment</h3> <br>
        <h4> Leave it blank if none...</h4>
        <label for="facebook-id">Facebook Gaming ID:</label>
        <input type="text" id="facebook-id" name="facebook-id">

        <label for="instagram-id">Instagram Gaming ID:</label>
        <input type="text" id="instagram-id" name="instagram-id">

        <label for="youtube-id">YouTube Gaming ID:</label>
        <input type="text" id="youtube-id" name="youtube-id">
        <div class="button-group">
          <button type="button" onclick="prevSection('content-attachment', 'personal-uploads')">Back</button>
          <button type="button" id="next-button-3" onclick="nextSection('content-attachment', 'terms-and-conditions')">Next</button>
        </div>
      </div>

      <!-- Section 4: Terms and Conditions -->
      <div class="section" id="terms-and-conditions">
        <h3>4. Terms and Conditions</h3>
        <p>Please read the terms and conditions carefully.</p>
        <textarea rows="6" readonly>
        [Insert Terms and Conditions here...]
        </textarea>

        <!-- Checkbox for agreement -->
        <label for="agree">I agree to the terms and conditions:</label>
        <input type="checkbox" id="agree" name="agree" required>

        <div class="button-group">
          <button type="button" onclick="prevSection('terms-and-conditions', 'content-attachment')">Back</button>
          <button type="submit">Submit</button>
        </div>
      </div>

    </form>

    <div id="loading-message">Submitting your data...</div>
  </div>

  <script>
    function nextSection(current, next) {
      // Validate required fields in the current section
      if (!validateFields(current)) {
        alert('Please fill all required fields.');
        return;
      }

      document.getElementById(current).classList.remove('active');
      document.getElementById(next).classList.add('active');
    }

    function prevSection(current, prev) {
      document.getElementById(current).classList.remove('active');
      document.getElementById(prev).classList.add('active');
    }

    function validateFields(sectionId) {
      const inputs = document.querySelectorAll(`#${sectionId} input[required], #${sectionId} textarea[required]`);
      let isValid = true;

      inputs.forEach(input => {
        if (!input.value.trim()) {
          input.classList.add('shake');
          isValid = false;
        } else {
          input.classList.remove('shake');
        }
      });

      return isValid;
    }

    async function handleFormSubmit(event) {
      event.preventDefault();
      document.getElementById('nirvana-form').style.display = 'none';
      document.getElementById('loading-message').style.display = 'block';

      try {
        const formData = new FormData(document.getElementById('nirvana-form'));
        const fileInputs = document.querySelectorAll('input[type="file"]');
        
        const filePromises = Array.from(fileInputs).map(input => {
          const file = input.files[0];
          if (file) {
            return new Promise((resolve) => {
              const reader = new FileReader();
              reader.onload = function(event) {
                const base64 = event.target.result.split(',')[1];
                formData.append(input.name, base64);
                resolve();
              };
              reader.readAsDataURL(file);
            });
          } else {
            resolve();  // If no file is selected, resolve immediately
          }
        });

        // Wait for all files to be processed
        await Promise.all(filePromises);

        const response = await fetch('https://script.google.com/macros/s/AKfycbwXytKMiq33_0QQ3wLLEkBYyY_ochI_205S2jTwZiEfXn6RiN0-QsYKB2pQ9Bk3s7oM/exec', {
          method: 'POST',
          body: formData,
        });

        const responseText = await response.text();
        alert(responseText);

        document.getElementById('loading-message').innerHTML = 'Thank you for Registering!';
      } catch (error) {
        alert('Submission failed. Please try again.');
        document.getElementById('nirvana-form').style.display = 'block';
        document.getElementById('loading-message').style.display = 'none';
      }
    }

    document.getElementById('nirvana-form').addEventListener('submit', handleFormSubmit);
  </script>

</body>
</html>
